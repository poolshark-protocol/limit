specVersion: 0.0.4
description: Poolshark is a Directional Liquidity AMM allowing LPs to capture directional strength.
repository: https://github.com/poolshark-protocol/limit
schema:
    file: ./schema.graphql
templates:
    - kind: ethereum/contract
      name: LimitPoolTemplate
      network: arbitrum-sepolia
      source:
          abi: LimitPool
      mapping:
          kind: ethereum/events
          apiVersion: 0.0.6
          language: wasm/assemblyscript
          file: ./src/mappings/limitpool.ts
          entities:
              - Token
              - LimitPool
              - Position
          abis:
              - name: LimitPool
                file: ./abis/LimitPool.json
              - name: LimitPoolFactory
                file: ./abis/LimitPoolFactory.json
              - name: ERC20
                file: ./abis/ERC20.json
              - name: ERC20SymbolBytes
                file: ./abis/ERC20SymbolBytes.json
              - name: ERC20NameBytes
                file: ./abis/ERC20NameBytes.json
          eventHandlers:
              - event: InitializeLimit(int24,int24,uint160,int24)
                handler: handleInitialize
              - event: SwapLimit(indexed address,uint256,uint256,uint200,uint200,uint160,uint128,uint128,int24,indexed bool,indexed bool)
                handler: handleSwap
              - event: MintLimit(indexed address,int24,int24,bool,uint32,uint32,uint128,uint128)
                handler: handleMintLimit
              - event: SampleCountIncreased(uint16)
                handler: handleSampleCountIncreased
              - event: SampleRecorded(int56,uint160)
                handler: handleSampleRecorded
              - event: MintRange(indexed address,int24,int24,indexed uint32,uint128,int128,int128)
                handler: handleMintRange
              - event: BurnRange(indexed address,indexed uint256,uint128,int128,int128)
                handler: handleBurnRange
              - event: CompoundRange(indexed uint32,uint128)
                handler: handleCompoundRange
              - event: SyncRangeTick(uint200,uint200,int24)
                handler: handleSyncRangeTick
              - event: BurnLimit(indexed address,uint32,int24,int24,int24,int24,bool,uint128,uint128,uint128)
                handler: handleBurnLimit
              - event: SyncLimitPool(uint160,uint128,uint32,int24,bool)
                handler: handleSyncLimitPool
              - event: SyncLimitLiquidity(uint128,int24,bool)
                handler: handleSyncLimitLiquidity
              - event: SyncLimitTick(uint32,int24,bool)
                handler: handleSyncLimitTick
              - event: Collect(indexed address,address,indexed int24,indexed int24,uint128,uint128)
                handler: handleCollect
    # ERC-1155 events
    - kind: ethereum/contract
      name: PositionERC1155Template
      network: arbitrum-sepolia
      source:
          abi: PositionERC1155
      mapping:
          kind: ethereum/events
          apiVersion: 0.0.6
          language: wasm/assemblyscript
          file: ./src/mappings/positionerc1155.ts
          entities:
              - Token
              - RangePool
              - RangePosition
          abis:
              - name: PositionERC1155
                file: ./abis/PositionERC1155.json
          eventHandlers:
              - event: TransferSingle(indexed address,indexed address,indexed address,uint256,uint256)
                handler: handleTransferSingle
              - event: TransferBatch(indexed address,indexed address,indexed address,uint256[],uint256[])
                handler: handleTransferBatch
    # RangeStaker events
    - kind: ethereum/contract
      name: RangeStakerTemplate
      network: arbitrum-sepolia
      source:
          abi: RangeStaker
      mapping:
          kind: ethereum/events
          apiVersion: 0.0.6
          language: wasm/assemblyscript
          file: ./src/mappings/staking/rangestaker.ts
          entities:
              - RangeStake
          abis:
              - name: RangeStaker
                file: ./abis/RangeStaker.json
          eventHandlers:
              - event: FeeToTransfer(indexed address,indexed address)
                handler: handleFeeToTransfer
              - event: OwnerTransfer(indexed address,indexed address)
                handler: handleOwnerTransfer
              - event: StakeRange(address,uint32,address,uint256,uint256,uint128)
                handler: handleStakeRange
              - event: StakeRangeAccrued(address,uint32,uint256,uint256)
                handler: handleStakeRangeAccrued
              - event: UnstakeRange(address,uint32,address)
                handler: handleUnstakeRange
dataSources:
  - kind: ethereum/contract
    name: LimitPoolFactory
    network: arbitrum-sepolia
    source:
        address: '0x8e40c68b7546efd009a1a300c92e25da3c8725dc'
        abi: LimitPoolFactory
        startBlock: 5789864
    mapping:
        kind: ethereum/events
        apiVersion: 0.0.6
        language: wasm/assemblyscript
        file: ./src/mappings/limitpoolfactory.ts
        entities:
            - Token
            - LimitPool
        abis:
            - name: LimitPool
              file: ./abis/LimitPool.json
            - name: LimitPoolFactory
              file: ./abis/LimitPoolFactory.json
            - name: ERC20
              file: ./abis/ERC20.json
            - name: ERC20SymbolBytes
              file: ./abis/ERC20SymbolBytes.json
            - name: ERC20NameBytes
              file: ./abis/ERC20NameBytes.json
        eventHandlers:
            - event: LimitPoolCreated(address,address,indexed address,indexed address,indexed uint16,int16,uint16)
              handler: handlePoolCreated
  - kind: ethereum/contract
    name: LimitPoolManager
    network: arbitrum-sepolia
    source:
        address: '0x0385d0a8d169b1f1510bb5fa0be264463002f6f6'
        abi: LimitPoolManager
        startBlock: 5789859
    mapping:
        kind: ethereum/events
        apiVersion: 0.0.6
        language: wasm/assemblyscript
        file: ./src/mappings/limitpoolmanager.ts
        entities:
            - LimitPool
            - LimitPoolFactory
        abis:
            - name: LimitPoolManager
              file: ./abis/LimitPoolManager.json
        eventHandlers:
            - event: FeeTierEnabled(uint16,int16)
              handler: handleFeeTierEnabled
            - event: PoolTypeEnabled(bytes32,address,address,uint16)
              handler: handlePoolTypeEnabled
            - event: FactoryChanged(indexed address,indexed address)
              handler: handleFactoryChanged
            - event: FeeToTransfer(indexed address,indexed address)
              handler: handleFeeToTransfer
            - event: OwnerTransfer(indexed address,indexed address)
              handler: handleOwnerTransfer
            - event: ProtocolFeesCollected(address[],uint128[],uint128[])
              handler: handleProtocolFeesCollected
            - event: ProtocolFillFeesModified(address[],int16[],int16[])
              handler: handleProtocolFillFeesModified
            - event: ProtocolSwapFeesModified(address[],int16[],int16[])
              handler: handleProtocolSwapFeesModified
  - kind: ethereum/contract
    name: PoolsharkRouter
    network: arbitrum-sepolia
    source:
        address: '0x4255e7a88bae87d2a5ff3ba317c6d512562f7078'
        abi: PoolsharkRouter
        startBlock: 5789931
    mapping:
        kind: ethereum/events
        apiVersion: 0.0.6
        language: wasm/assemblyscript
        file: ./src/mappings/poolsharkrouter.ts
        entities:
            - PoolsharkRouter
        abis:
            - name: PoolsharkRouter
              file: ./abis/PoolsharkRouter.json
        eventHandlers:
            - event: RouterDeployed(address,address,address)
              handler: handleRouterDeployed
  - kind: ethereum/contract
    name: vFIN
    network: arbitrum-sepolia
    source:
        address: '0xed0ef8101900dfed208ac99ce47b723debb6bfe6'
        abi: vFIN
        startBlock: 5795375
    mapping:
        kind: ethereum/events
        apiVersion: 0.0.6
        language: wasm/assemblyscript
        file: ./src/mappings/vfin.ts
        entities:
            - VestedFin
        abis:
            - name: vFIN
              file: ./abis/vFIN.json
        eventHandlers:
            - event: Transfer(indexed address,indexed address,indexed uint256)
              handler: handleTransfer
  - kind: ethereum/contract
    name: v3EthStablePool
    network: arbitrum-sepolia
    source:
        address: '0x58801ff62fdff4e23007a563c8c0e7ce799d598b'
        abi: v3Pool
        startBlock: 5789922
    mapping:
        kind: ethereum/events
        apiVersion: 0.0.6
        language: wasm/assemblyscript
        file: ./src/mappings/v3pool.ts
        entities:
            - BasePrice
        abis:
            - name: v3Pool
              file: ./abis/v3Pool.json
        eventHandlers:
            - event: Initialize(uint160,int24)
              handler: handleV3Initialize
            - event: Swap(indexed address,indexed address,int256,int256,uint160,uint128,int24)
              handler: handleV3Swap