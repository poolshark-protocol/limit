specVersion: 0.0.4
description: Poolshark is a Directional Liquidity AMM allowing LPs to capture directional strength.
repository: https://github.com/poolshark-protocol/limit
schema:
    file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: LimitPoolFactory
    network: arbitrum-goerli
    source:
        address: '0x658e23AffE417B8b67ae56e2EF2d88B8aa85a1E0'
        abi: LimitPoolFactory
        startBlock: 37362203
    mapping:
        kind: ethereum/events
        apiVersion: 0.0.6
        language: wasm/assemblyscript
        file: ./src/mappings/limitpoolfactory.ts
        entities:
            - Token
            - LimitPool
        abis:
            - name: LimitPool
              file: ./abis/LimitPool.json
            - name: LimitPoolFactory
              file: ./abis/LimitPoolFactory.json
            - name: ERC20
              file: ./abis/ERC20.json
            - name: ERC20SymbolBytes
              file: ./abis/ERC20SymbolBytes.json
            - name: ERC20NameBytes
              file: ./abis/ERC20NameBytes.json
        eventHandlers:
            - event: PoolCreated(address,address,address,address,indexed address,indexed address,indexed uint16,int16)
              handler: handlePoolCreated
  - kind: ethereum/contract
    name: LimitPoolManager
    network: arbitrum-goerli
    source:
        address: '0x04040cc78dFBe646D9A7CfCDc7F330F043499738'
        abi: LimitPoolManager
        startBlock: 37362193
    mapping:
        kind: ethereum/events
        apiVersion: 0.0.6
        language: wasm/assemblyscript
        file: ./src/mappings/limitpoolmanager.ts
        entities:
            - LimitPool
            - LimitPoolFactory
        abis:
            - name: LimitPoolManager
              file: ./abis/LimitPoolManager.json
        eventHandlers:
            - event: FeeTierEnabled(uint16,int16)
              handler: handleFeeTierEnabled
            - event: ImplementationEnabled(bytes32,address,address)
              handler: handleImplementationEnabled
            - event: FactoryChanged(indexed address,indexed address)
              handler: handleFactoryChanged
            - event: FeeToTransfer(indexed address,indexed address)
              handler: handleFeeToTransfer
            - event: OwnerTransfer(indexed address,indexed address)
              handler: handleOwnerTransfer
            - event: ProtocolFeesCollected(address[],uint128[],uint128[])
              handler: handleProtocolFeesCollected
            - event: ProtocolFillFeesModified(address[],uint16[],uint16[])
              handler: handleProtocolFillFeesModified
            - event: ProtocolSwapFeesModified(address[],uint16[],uint16[])
              handler: ProtocolSwapFeesModified
  - kind: ethereum/contract
    name: PoolsharkRouter
    network: arbitrum-goerli
    source:
        address: '0xb6ECCa9CDe4D91f8447ca2f165e07931Dc03E1e3'
        abi: PoolsharkRouter
        startBlock: 37362324
    mapping:
        kind: ethereum/events
        apiVersion: 0.0.6
        language: wasm/assemblyscript
        file: ./src/mappings/limitpoolrouter.ts
        entities:
            - PoolsharkRouter
        abis:
            - name: PoolsharkRouter
              file: ./abis/PoolsharkRouter.json
        eventHandlers:
            - event: RouterDeployed(address,address,address)
              handler: handleRouterDeployed
templates:
    - kind: ethereum/contract
      name: LimitPoolTemplate
      network: arbitrum-goerli
      source:
          abi: LimitPool
      mapping:
          kind: ethereum/events
          apiVersion: 0.0.6
          language: wasm/assemblyscript
          file: ./src/mappings/limitpool.ts
          entities:
              - Token
              - LimitPool
              - Position
          abis:
              - name: LimitPool
                file: ./abis/LimitPool.json
              - name: LimitPoolFactory
                file: ./abis/LimitPoolFactory.json
              - name: ERC20
                file: ./abis/ERC20.json
              - name: ERC20SymbolBytes
                file: ./abis/ERC20SymbolBytes.json
              - name: ERC20NameBytes
                file: ./abis/ERC20NameBytes.json
          eventHandlers:
              - event: Initialize(int24,int24,uint160,int24)
                handler: handleInitialize
              - event: Swap(indexed address,uint256,uint256,uint200,uint200,uint160,uint128,uint128,int24,indexed bool,indexed bool)
                handler: handleSwap
              - event: SampleLengthIncreased(uint16)
                handler: handleSampleLengthIncreased
              - event: SampleRecorded(int56,uint160)
                handler: handleSampleRecorded
              - event: MintRange(indexed address,int24,int24,indexed uint32,uint128,int128,int128)
                handler: handleMintRange
              - event: BurnRange(indexed address,indexed uint256,uint128,int128,int128)
                handler: handleBurnRange
              - event: CompoundRange(indexed uint32,uint128)
                handler: handleCompoundRange
              - event: CollectRange(uint128,uint128)
                handler: handleCollectRange
              - event: SyncRangeTick(uint200,uint200,int24)
                handler: handleSyncRangeTick
              - event: MintLimit(indexed address,int24,int24,bool,uint32,uint32,uint128,uint128,uint128)
                handler: handleMintLimit
              - event: BurnLimit(indexed address,uint32,int24,int24,int24,int24,bool,uint128,uint128,uint128)
                handler: handleBurnLimit
              - event: SyncLimitPool(uint160,uint128,uint32,int24,bool)
                handler: handleSyncLimitPool
              - event: SyncLimitLiquidity(uint128,int24,bool)
                handler: handleSyncLimitLiquidity
              - event: SyncLimitTick(uint32,int24,bool)
                handler: handleSyncLimitTick
    # ERC-1155 events
    - kind: ethereum/contract
      name: PositionERC1155Template
      network: arbitrum-goerli
      source:
          abi: PositionERC1155
      mapping:
          kind: ethereum/events
          apiVersion: 0.0.6
          language: wasm/assemblyscript
          file: ./src/mappings/limitpool.ts
          entities:
              - Token
              - RangePool
              - RangePosition
          abis:
              - name: PositionERC1155
                file: ./abis/PositionERC1155.json
          eventHandlers:
              - event: TransferSingle(indexed address,indexed address,indexed address,uint256,uint256)
                handler: handleTransferSingle
              - event: TransferBatch(indexed address,indexed address,indexed address,uint256[],uint256[])
                handler: handleTransferBatch

